<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Statistics</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-surface">
  <div class="px-4 py-4">
    <app-notch-header
      [title]="'Statistics'"
      [icon]="'stats-chart'"
      [items]="[{icon:'calendar', text: selectedTimeRange}, {icon:'information-circle', text: selectedExercise}]">
    </app-notch-header>
  </div>
  <!-- Filters -->
  <div class="px-4 py-6 fade-in-up">
    <div class="flex flex-col space-y-4 mb-6">
      <div>
        <label class="text-white font-medium mb-2 block">Time Range</label>
        <ion-segment [(ngModel)]="selectedTimeRange" (ionChange)="onTimeRangeChange($event)" class="w-full">
          <ion-segment-button value="week" class="text-gray-400 text-red-500">
            <ion-label>Week</ion-label>
          </ion-segment-button>
          <ion-segment-button value="month" class="text-gray-400 text-red-500">
            <ion-label>Month</ion-label>
          </ion-segment-button>
          <ion-segment-button value="3months" class="text-gray-400 text-red-500">
            <ion-label>3 Months</ion-label>
          </ion-segment-button>
          <ion-segment-button value="year" class="text-gray-400 text-red-500">
            <ion-label>Year</ion-label>
          </ion-segment-button>
        </ion-segment>
      </div>
      
      <div>
        <label class="text-white font-medium mb-2 block">Exercise</label>
        <ion-select [(ngModel)]="selectedExercise" (ionChange)="onExerciseChange($event)" class="w-full">
          <ion-select-option value="all">All Exercises</ion-select-option>
          <ion-select-option value="bench_press">Bench Press</ion-select-option>
          <ion-select-option value="squat">Squat</ion-select-option>
          <ion-select-option value="deadlift">Deadlift</ion-select-option>
          <ion-select-option value="overhead_press">Overhead Press</ion-select-option>
        </ion-select>
      </div>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-2 gap-4 mb-6">
      <ion-card class="liftlog-card">
        <ion-card-content class="p-4 text-center">
          <div class="text-2xl font-bold text-gradient-primary mb-1">180</div>
          <div class="text-gray-400 text-sm">Personal Record</div>
          <div class="text-green-500 text-xs mt-1">+5 lbs this month</div>
        </ion-card-content>
      </ion-card>
      
      <ion-card class="liftlog-card">
        <ion-card-content class="p-4 text-center">
          <div class="text-2xl font-bold text-gradient-primary mb-1">24</div>
          <div class="text-gray-400 text-sm">Workouts</div>
          <div class="text-green-500 text-xs mt-1">+3 this month</div>
        </ion-card-content>
      </ion-card>
      
      <ion-card class="liftlog-card">
        <ion-card-content class="p-4 text-center">
          <div class="text-2xl font-bold text-gradient-primary mb-1">2,850</div>
          <div class="text-gray-400 text-sm">Avg Volume</div>
          <div class="text-green-500 text-xs mt-1">+12% trend</div>
        </ion-card-content>
      </ion-card>
      
      <ion-card class="liftlog-card">
        <ion-card-content class="p-4 text-center">
          <div class="text-2xl font-bold text-gradient-primary mb-1">85%</div>
          <div class="text-gray-400 text-sm">Consistency</div>
          <div class="text-green-500 text-xs mt-1">Great job!</div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Progress Chart -->
    <ion-card class="liftlog-card mb-6">
      <ion-card-header>
        <ion-card-title class="text-white">Weight Progress</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="chart-container" style="height: 250px;">
          <canvas id="progressChart"></canvas>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Volume Chart -->
    <ion-card class="liftlog-card mb-6">
      <ion-card-header>
        <ion-card-title class="text-white">Volume Trends</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="chart-container" style="height: 250px;">
          <canvas id="volumeChart"></canvas>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Frequency Chart -->
    <ion-card class="liftlog-card mb-6">
      <ion-card-header>
        <ion-card-title class="text-white">Weekly Frequency</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="chart-container" style="height: 250px;">
          <canvas id="frequencyChart"></canvas>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Personal Records -->
    <ion-card class="liftlog-card mb-6">
      <ion-card-header>
        <ion-card-title class="text-white">Personal Records</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
            <div class="flex items-center">
              <div class="w-8 h-8 bg-gradient-to-r from-yellow-500 to-yellow-400 rounded-full flex items-center justify-center mr-3">
                <ion-icon name="trophy" class="text-white text-sm"></ion-icon>
              </div>
              <div>
                <div class="text-white font-medium">Bench Press</div>
                <div class="text-gray-400 text-sm">Set on Oct 15, 2024</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-white font-bold">180 lbs</div>
              <div class="text-green-500 text-sm">+5 lbs</div>
            </div>
          </div>
          
          <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
            <div class="flex items-center">
              <div class="w-8 h-8 bg-gradient-to-r from-yellow-500 to-yellow-400 rounded-full flex items-center justify-center mr-3">
                <ion-icon name="trophy" class="text-white text-sm"></ion-icon>
              </div>
              <div>
                <div class="text-white font-medium">Squat</div>
                <div class="text-gray-400 text-sm">Set on Oct 12, 2024</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-white font-bold">225 lbs</div>
              <div class="text-green-500 text-sm">+10 lbs</div>
            </div>
          </div>
          
          <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
            <div class="flex items-center">
              <div class="w-8 h-8 bg-gradient-to-r from-yellow-500 to-yellow-400 rounded-full flex items-center justify-center mr-3">
                <ion-icon name="trophy" class="text-white text-sm"></ion-icon>
              </div>
              <div>
                <div class="text-white font-medium">Deadlift</div>
                <div class="text-gray-400 text-sm">Set on Oct 10, 2024</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-white font-bold">275 lbs</div>
              <div class="text-green-500 text-sm">+15 lbs</div>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
